<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Equipment Availability - Audiowerks</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    body {
      font-family: 'Poppins', Arial, sans-serif;
      background: #ffffff;
      color: #333;
    }
    .header {
        background: #002244;
        color: #ffffff;
        padding: 15px 30px;
        display: flex;
        align-items: center;
        gap: 15px;
        position: relative;
    }
    .user-avatar {
        width: 50px;
        height: 50px;
        background: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 3px solid #3b82f6;
    }
    .user-icon {
        width: 30px;
        height: 30px;
        background: #1e3a8a;
        border-radius: 50%;
        position: relative;
    }
    .user-icon::before {
        content: '';
        position: absolute;
        width: 12px;
        height: 12px;
        background: white;
        border-radius: 50%;
        top: 6px;
        left: 9px;
    }
    .user-icon::after {
        content: '';
        position: absolute;
        width: 20px;
        height: 10px;
        background: white;
        border-radius: 10px 10px 0 0;
        bottom: 4px;
        left: 5px;
    }
    .user-info h3 {
        font-size: 16px;
        margin-bottom: 3px;
    }
    .user-info p {
        font-size: 12px;
        opacity: 0.8;
    }
    header {
        position: sticky;
        top: 0;
        z-index: 100;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        background: url('images/lights-sounds.png') center/cover no-repeat, rgba(255,255,255,0.7);
        background-blend-mode: lighten;
        -webkit-backdrop-filter: blur(8px);
        backdrop-filter: blur(8px);
        border-bottom: 1px solid #ddd;
        box-shadow: 0 2px 12px rgba(0,0,0,0.07);
    }
    .logo-container img {
        height: 70px;
        cursor: pointer;
    }
    .logo-container a {
        display: inline-block;
    }
    .header-center {
        text-align: center;
        flex: 1;
    }
    .header-icons {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }
    .header-icons i {
        font-size: 28px;
        color: #000;
        cursor: pointer;
        transition: transform 0.2s;
    }
    .header-icons i:hover {
        transform: scale(1.2);
    }
    .menu-popup {
        display: none;
        position: fixed;
        top: 80px;
        right: 20px;
        background-color: #fff;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        border-radius: 10px;
        overflow: hidden;
        z-index: 1000;
        min-width: 200px;
        transition: all 0.3s ease;
    }
    .menu-popup a {
        display: block;
        padding: 10px 15px;
        color: #000;
        text-decoration: none;
        border-bottom: 1px solid #eee;
    }
    .menu-popup a:hover {
        background-color: #f0f0f0;
    }
    .menu-popup a:last-child {
        background-color: #191970;
        color: #fff;
        border-bottom: none;
        transition: background 0.3s ease, transform 0.2s;
    }
    .menu-popup a:last-child:hover {
        background-color: #000080;
        transform: scale(1.02);
    }
    .fa-bars {
        transition: transform 0.3s;
    }
    .fa-bars.active {
        transform: rotate(90deg);
    }
    .white-divider {
        border: none;
        height: 6px;
        background: #fff;
        border-radius: 3px;
        margin: 18px 0 28px 0;
        width: 100%;
        box-shadow: 0 2px 8px rgba(30,58,138,0.10);
    }
    .tab-bar {
      background: #002244;
      display: flex;
      align-items: center;
      padding: 0 0 0 0;
      height: 56px;
      border-bottom: 4px solid #fff;
    }
    .tab-bar .tab {
      font-family: 'Georgia', serif;
      font-size: 2rem;
      font-weight: bold;
      color: #fff;
      background: none;
      border: none;
      outline: none;
      margin: 0 18px 0 36px;
      cursor: pointer;
      padding: 0 12px;
      transition: color 0.2s;
    }
    .tab-bar .tab.selected {
      color: #fff;
      border-bottom: 0;
    }
    .tab-bar .tab-light {
      background: #b0b6be;
      color: #fff;
      border-radius: 22px;
      font-size: 1.5rem;
      margin-right: 12px;
      padding: 4px 32px;
      font-weight: bold;
      border: none;
    }
    .tab-bar .tab-sound {
      background: #c6ece7;
      color: #fff;
      border-radius: 22px;
      font-size: 1.5rem;
      margin-right: 12px;
      padding: 4px 32px;
      font-weight: bold;
      border: none;
    }
    .section-title {
      text-align: center;
      font-size: 2.3rem;
      font-weight: 700;
      color: #0047AB;
      margin: 36px 0 18px 0;
      letter-spacing: 1px;
    }
    .main-card, .bundle-card {
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 4px 18px rgba(0,34,68,0.08);
      padding: 32px 18px 24px 18px;
      margin: 0 auto 36px auto;
      max-width: 1100px;
    }
    .main-table, .bundle-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0 12px;
      margin-top: 12px;
    }
    .main-table th, .bundle-table th {
      background: #eaf1fb;
      color: #0047AB;
      font-weight: 700;
      padding: 16px 10px;
      font-size: 1.1rem;
      border-radius: 10px 10px 0 0;
    }
    .main-table td, .bundle-table td {
      background: #f9f9fb;
      padding: 18px 12px;
      font-size: 1.08rem;
      vertical-align: middle;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(30,58,138,0.04);
    }
    .main-table tr:hover, .bundle-table tr:hover {
      background: #e0eaff;
      transition: background 0.2s;
    }
    .product-img {
      width: 90px;
      height: 90px;
      object-fit: cover;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(30,58,138,0.10);
      margin-right: 18px;
      border: 2px solid #eaf1fb;
      background: #e0e6ef;
    }
    .product-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: #191970;
      margin-bottom: 4px;
    }
    .product-desc {
      font-size: 1rem;
      color: #222;
      margin-bottom: 0;
    }
    .product-title.unavailable, .product-desc.unavailable {
      color: #b0b6be;
      opacity: 0.7;
    }
    .status-badge {
      display: inline-block;
      font-size: 1rem;
      font-weight: 600;
      padding: 7px 22px;
      border-radius: 18px;
      margin-top: 6px;
      margin-bottom: 0;
      background: #b0b6be;
      color: #fff;
      letter-spacing: 1px;
    }
    .status-available {
      background: #3bdf7c;
      color: #fff;
    }
    .status-booked {
      background: #b0b6be;
      color: #fff;
    }
    .status-label {
      font-size: 0.98rem;
      color: #0047AB;
      font-weight: 500;
      margin-bottom: 2px;
    }
    .inventory-info {
      font-size: 1rem;
      color: #0047AB;
      font-weight: 600;
    }
    footer {
        background: linear-gradient(90deg, #191970 60%, #0047AB 100%);
        color: white;
        text-align: center;
        padding: 25px 10px 15px;
        margin-top: auto;
        border-top-left-radius: 16px;
        border-top-right-radius: 16px;
        position: relative;
    }
    .footer-social {
        margin: 10px 0 5px;
    }
    .footer-social a {
        color: #bccedf;
        margin: 0 8px;
        font-size: 1.5rem;
        transition: color 0.2s;
    }
    .footer-social a:hover {
        color: #ffc300;
    }
    .footer-contact span {
        font-size: 1.2rem;
        font-weight: bold;
    }
    .footer-note {
        margin: 8px 0 0;
        font-size: 1rem;
        color: #bccedf;
    }
    .back-to-top {
        position: absolute;
        right: 20px;
        top: 20px;
        background: #ffc300;
        color: #191970;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        font-size: 1.5rem;
        cursor: pointer;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        transition: background 0.2s, color 0.2s;
    }
    .back-to-top:hover {
        background: #191970;
        color: #ffc300;
    }
    @media (max-width: 900px) {
      .main-card, .bundle-card {
        padding: 12px 2vw 12px 2vw;
        max-width: 98vw;
      }
      .main-table td, .bundle-table td {
        font-size: 0.98rem;
        padding: 12px 4px;
      }
      .product-img {
        width: 60px;
        height: 60px;
      }
    }
    @media (max-width: 600px) {
      .main-table, .bundle-table {
        display: block;
        overflow-x: auto;
        width: 100%;
      }
      .main-table thead, .main-table tbody, .main-table tr,
      .bundle-table thead, .bundle-table tbody, .bundle-table tr {
        display: table;
        width: 100%;
        table-layout: fixed;
      }
      .main-card, .bundle-card {
        padding: 6px 0 6px 0;
      }
      .section-title {
        font-size: 1.3rem;
      }
    }
      /* --- Floating Chat Styles (copied from homepage.html) --- */
      .floating-chat-head {
        position: fixed;
        bottom: 32px;
        right: 32px;
        z-index: 3000;
        width: 64px;
        height: 64px;
        background: linear-gradient(135deg, #0047AB 60%, #191970 100%);
        border-radius: 50%;
        box-shadow: 0 4px 18px rgba(0,34,68,0.18);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: box-shadow 0.2s, transform 0.2s;
      }
      .floating-chat-head:hover {
        box-shadow: 0 8px 32px rgba(0,34,68,0.28);
        transform: scale(1.07);
      }
      .floating-chat-head i {
        color: #fff;
        font-size: 2.2rem;
      }
      .floating-chat-popup {
        position: fixed;
        bottom: 110px;
        right: 32px;
        z-index: 3100;
        width: 340px;
        max-width: 95vw;
        height: auto;
        max-height: 70vh;
        background: #fff;
        border-radius: 0 0 18px 18px;
        box-shadow: 0 8px 32px rgba(0,34,68,0.18);
        padding: 0;
        overflow: hidden;
        display: none;
        flex-direction: column;
      }
      .floating-chat-popup.open {
        display: flex;
      }
      .floating-chat-popup-header {
        background: #002244;
        color: #fff;
        padding: 10px 10px 8px 10px;
        font-size: 1rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        border-bottom: 1.5px solid #2222;
      }
      .floating-chat-header-right {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .floating-chat-call-btn {
        background: none !important;
        border: none !important;
        box-shadow: none !important;
        outline: none !important;
        color: #fff;
        font-size: 1.1rem;
        padding: 2px 5px;
        border-radius: 50%;
        cursor: pointer;
        transition: background 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .floating-chat-call-btn:hover,
      .floating-chat-call-btn:focus {
        background: #00152a !important;
      }
      .floating-chat-popup-body {
        flex: 1 1 auto;
        min-height: 0;
        max-height: 100%;
        overflow-y: auto;
        padding: 12px 0 0 0;
        font-size: 0.98rem;
        gap: 12px;
        background: #fff;
        display: flex;
        flex-direction: column;
      }
      .floating-chat-bubble {
        max-width: 95%;
        padding: 10px 14px;
        border-radius: 12px;
        font-size: 0.98rem;
        margin-bottom: 2px;
        position: relative;
        transition: background 0.2s;
      }
      .floating-chat-bubble.right {
        background: #002244;
        color: #fff;
        align-self: flex-end;
        border: 2.5px solid #002244;
        border-bottom-right-radius: 8px;
        margin-right: 18px;
      }
      .floating-chat-bubble.right:after {
        content: '';
        position: absolute;
        right: -14px;
        top: 10px;
        width: 0; height: 0;
        border-top: 10px solid transparent;
        border-left: 14px solid #002244;
        border-bottom: 0 solid transparent;
      }
      .floating-chat-bubble.right:before {
        content: '';
        position: absolute;
        right: -11px;
        top: 13px;
        width: 0; height: 0;
        border-top: 8px solid transparent;
        border-left: 11px solid #002244;
        border-bottom: 0 solid transparent;
      }
      .floating-chat-bubble.left {
        background: #fff;
        color: #002244;
        border: 2.5px solid #002244;
        align-self: flex-start;
        border-bottom-left-radius: 8px;
        margin-left: 18px;
      }
      .floating-chat-bubble.left:after {
        content: '';
        position: absolute;
        left: -14px;
        top: 10px;
        width: 0; height: 0;
        border-top: 10px solid transparent;
        border-right: 14px solid #002244;
        border-bottom: 0 solid transparent;
      }
      .floating-chat-bubble.left:before {
        content: '';
        position: absolute;
        left: -11px;
        top: 13px;
        width: 0; height: 0;
        border-top: 8px solid transparent;
        border-right: 11px solid #fff;
        border-bottom: 0 solid transparent;
      }
      .floating-chat-bubble .bubble-reaction {
        position: absolute;
        top: -18px;
        right: 10px;
        margin: 0;
        font-size: 1.2rem;
        background: #fff;
        border-radius: 50%;
        box-shadow: 0 2px 6px rgba(0,0,0,0.07);
        padding: 2px 6px;
        z-index: 3;
        border: 1.5px solid #f7b731;
      }
      .floating-chat-bubble .bubble-menu {
        margin-left: 4px;
        font-size: 1rem;
        width: 22px;
        height: 22px;
        top: -4px;
      }
      .floating-chat-popup-input {
        flex-shrink: 0;
        display: flex;
        align-items: center;
        padding: 8px 8px;
        background: #002244;
        border-top: 1.5px solid #2222;
        flex-wrap: wrap;
      }
      .floating-chat-popup-input .input-icons {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-shrink: 0;
      }
      .floating-chat-popup-input input {
        flex: 1 1 120px;
        min-width: 0;
        padding: 8px 10px;
        border-radius: 20px;
        font-size: 0.98rem;
        margin: 0 8px;
        background: #fff;
        color: #002244;
        border: none;
        outline: none;
        box-shadow: 0 2px 12px rgba(0,0,0,0.04);
      }
      .floating-chat-popup-input .input-btn,
      .floating-chat-popup-input .send-btn {
        background: none !important;
        border: none !important;
        color: #fff;
        font-size: 1.5rem;
        cursor: pointer;
        border-radius: 50%;
        padding: 4px 7px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: none !important;
        outline: none;
        transition: background 0.2s;
      }
      .floating-chat-popup-input .send-btn {
        font-size: 1.7rem;
        padding: 4px 10px;
        margin-left: 6px;
      }
      .floating-chat-popup-input .input-btn:hover,
      .floating-chat-popup-input .send-btn:hover,
      .floating-chat-popup-input .input-btn:focus,
      .floating-chat-popup-input .send-btn:focus {
        background: #00152a !important;
      }
      .floating-chat-bubble .msg-actions {
        display: none;
        position: absolute;
        top: -22px;
        right: 0;
        background: rgba(255,255,255,0.97);
        border-radius: 16px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.10);
        z-index: 2;
        padding: 2px 4px;
        gap: 2px;
      }
      .floating-chat-bubble:hover .msg-actions {
        display: flex;
      }
      .msg-action-btn {
        background: none;
        border: none;
        color: #002244;
        font-size: 1.1rem;
        cursor: pointer;
        margin: 0 2px;
        border-radius: 50%;
        padding: 2px 5px;
        transition: background 0.15s;
      }
      .msg-action-btn:hover {
        background: #e6eaf0;
      }
      .floating-chat-bubble.pinned {
        border: 2.5px solid #f7b731 !important;
        background: #fffbe6 !important;
      }
      .floating-chat-bubble .msg-timestamp {
        display: inline-block;
        font-size: 0.85rem;
        color: #888;
        text-align: right;
        margin-top: 6px;
        margin-right: 2px;
        font-family: 'Poppins', Arial, sans-serif;
        opacity: 0.85;
      }
      .floating-chat-bubble .read-receipt {
        display: inline-block;
        font-size: 1.1em;
        color: #1e90ff;
        margin-left: 4px;
        vertical-align: middle;
        opacity: 0.85;
      }
      .floating-chat-bubble .read-receipt .fa-eye {
        color: #1e90ff;
        font-size: 1.1em;
        vertical-align: middle;
      }
      .bubble-edit-input {
        width: 100%;
        box-sizing: border-box;
        padding: 8px 12px;
        border-radius: 12px;
        border: 2px solid #002244;
        font-size: 0.98rem;
        font-family: inherit;
        background: #fff;
        color: #111;
        outline: none;
        margin: 0;
      }
      .floating-chat-bubble.right .bubble-edit-input {
        background: #002244;
        color: #fff;
        border: 2px solid #002244;
      }
      .pinned-modal-overlay {
        position: fixed;
        top: 0; left: 0; right: 0; bottom: 0;
        background: rgba(0,0,0,0.25);
        z-index: 4000;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .pinned-modal {
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.18);
        padding: 32px 28px 24px 28px;
        min-width: 260px;
        max-width: 90vw;
        max-height: 70vh;
        overflow-y: auto;
        position: relative;
      }
      .pinned-modal h2 {
        margin-top: 0;
        font-size: 1.1rem;
        color: #002244;
        font-family: 'Poppins', Arial, sans-serif;
        margin-bottom: 18px;
      }
      .pinned-modal .close-btn {
        position: absolute;
        top: 12px;
        right: 18px;
        background: none;
        border: none;
        font-size: 1.3rem;
        color: #002244;
        cursor: pointer;
        border-radius: 50%;
        padding: 2px 8px;
        transition: background 0.2s;
      }
      .pinned-modal .close-btn:hover {
        background: #e6eaf0;
      }
      .pinned-modal .pinned-list {
        display: flex;
        flex-direction: column;
        gap: 14px;
      }
      .pinned-modal .floating-chat-bubble {
        box-shadow: 0 2px 8px rgba(0,0,0,0.07);
        margin: 0;
      }
      .pinned-modal .msg-actions { display: none !important; }
      #floatingImageModalOverlay {
        position: fixed;
        top: 0; left: 0; right: 0; bottom: 0;
        background: rgba(0,0,0,0.55);
        z-index: 5000;
        display: flex;
        align-items: center;
        justify-content: center;
        display: none;
      }
      #floatingImageModalOverlay.open {
        display: flex;
      }
      #floatingImageModal {
        background: #fff;
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.18);
        padding: 18px 18px 10px 18px;
        max-width: 96vw;
        max-height: 90vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
      }
      #floatingImageModal img {
        max-width: 80vw;
        max-height: 70vh;
        border-radius: 12px;
        box-shadow: 0 2px 12px rgba(0,0,0,0.13);
      }
      #floatingImageModal .close-btn {
        position: absolute;
        top: 8px;
        right: 12px;
        background: none;
        border: none;
        font-size: 1.7rem;
        color: #002244;
        cursor: pointer;
        border-radius: 50%;
        padding: 2px 8px;
        transition: background 0.2s;
      }
      #floatingImageModal .close-btn:hover {
        background: #e6eaf0;
      }
      @media (max-width: 400px) {
        .floating-chat-popup {
          width: 98vw;
          right: 1vw;
          left: 1vw;
          min-width: 0;
        }
        .floating-chat-popup-input .input-icons {
          gap: 4px;
        }
        .floating-chat-popup-input input {
          font-size: 0.92rem;
          margin: 0 4px;
        }
      }
      /* --- End Floating Chat Styles --- */
  </style>
</head>
<body>
  <header>
    <div class="logo-container">
      <a href="homepage.html"><img src="logo.png" alt="AudioWerks Logo, click to go home" style="height: 70px;" /></a>
    </div>
    <div class="header-center">
      <h1 style="font-size: 2rem; font-weight: bold; color: #0047AB; margin: 0;">Audiowerks</h1>
      <p style="font-size: 1.1rem; color: #0047AB; margin: 0;">Lights and Sounds</p>
    </div>
    <div class="header-icons">
      <i class="fas fa-bars" aria-label="Menu" tabindex="0" onclick="toggleMenu(this)"></i>
    </div>
    <nav class="menu-popup" id="menuPopup" aria-label="Main Navigation">
      <a href="homepage.html">Home</a>
      <a href="portfolioo.html">Portfolio</a>
      <a href="#booking">Book Here</a>
      <a href="User.html">User Profile</a>
      <a href="availability.html">Equipment</a>
      <a href="feedback.html">Feedback Dashboard</a>
      <a href="login.html" onclick="logout()">Logout</a>
    </nav>
  </header>
  <div class="tab-bar">
    <button class="tab selected">Equipment</button>
  </div>
  <div class="section-title">Equipment Availability</div>
  <div class="main-card">
    <table class="main-table" id="servicesTable">
      <thead>
        <tr>
          <th>Service</th>
          <th>Status</th>
          <th>Available Units</th>
        </tr>
      </thead>
      <tbody id="servicesTbody"></tbody>
    </table>
  </div>
  <div class="section-title" style="margin-top:40px;">Bundles</div>
  <div class="bundle-card">
    <table class="bundle-table">
      <thead>
        <tr>
          <th>Bundle Name</th>
          <th>Price</th>
          <th>Included Services</th>
        </tr>
      </thead>
      <tbody id="bundlesTbody"></tbody>
    </table>
  </div>
  <footer>
    <button class="back-to-top" onclick="window.scrollTo({top:0,behavior:'smooth'})" aria-label="Back to top">&#8679;</button>
    <div class="footer-social">
      <a href="https://www.facebook.com/share/19oj3miUWN/?mibextid=wwXIfr" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
    </div>
    <div class="footer-contact">
      <span><i class="fas fa-phone"></i> 0932 586 1073</span>
    </div>
    <div class="footer-note">
      <span>You can also contact us directly on this website.</span>
    </div>
    <p>&copy; 2025 AudioWerks. All rights reserved.</p>
  </footer>

<!-- Firebase App (the core Firebase SDK) -->
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-app-compat.js"></script>
<!-- Firebase Auth -->
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-auth-compat.js"></script>
<!-- Firebase Database -->
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-database-compat.js"></script>
<!-- Your Firebase config and backend logic -->
<script src="firebase-config-new.js"></script>
<script src="firebase-backend-new.js"></script>

  <!-- Dynamic services table script (must come after backend scripts) -->
  <script>
    function toggleMenu(btn) {
      const menu = document.getElementById('menuPopup');
      const bars = document.querySelector('.fa-bars');
      menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
      bars.classList.toggle('active');
    }
    window.addEventListener('click', function (e) {
      const menu = document.getElementById('menuPopup');
      const button = document.querySelector('.fa-bars');
      if (!menu.contains(e.target) && e.target !== button) {
        menu.style.display = 'none';
        button.classList.remove('active');
      }
    });
    function logout() {
      localStorage.clear();
      sessionStorage.clear();
      window.location.href = "login.html";
    }

    // Dynamically load services and their availability
    document.addEventListener('DOMContentLoaded', async function() {
      const coreServices = [
        { name: 'Lights & Sounds', image: 'images/lights-sounds.png', description: 'Our core package delivers high-quality audio systems paired with dynamic lighting effects. Perfect for weddings, birthdays, and corporate events, it ensures crystal-clear sound and vibrant visual experiences that energize any crowd.' },
        { name: 'Led Wall', image: 'images/led-wall.png', description: 'Wow your audience with our high-resolution LED wall. Perfect for live video feeds, slideshows, branding, or visual effects, it delivers stunning visuals that make a lasting impression at concerts, conferences, and big celebrations.' },
        { name: 'Stage', image: 'images/Stage.png', description: 'Ensure your performers and speakers have the platform they need with our professional stage setups. Designed for safety, visibility, and aesthetic appeal, our stages suit everything from intimate gatherings to large-scale productions.' },
        { name: 'Mood Light', image: 'images/mood-lights.png', description: 'Set the perfect tone with customizable mood lighting. Our LED uplights and color washes adapt to any theme, from classy and elegant to fun and vibrant, making your venue truly unforgettable.' },
        { name: 'String Lights', image: 'images/string-lights.png', description: 'Transform your venue with warm, romantic ambience using our elegant string lights. Ideal for garden weddings and outdoor receptions, they add a charming glow that enhances every moment and photograph.' },
        { name: 'Low Lying', image: 'images/low-lying.jpg', description: 'Create a dramatic "dancing on a cloud" effect with our low-lying fog machine. Perfect for first dances and grand entrances, it delivers a magical atmosphere that captivates guests and elevates your event.' }
      ];
      const servicesTbody = document.getElementById('servicesTbody');
      servicesTbody.innerHTML = '';
      const services = await window.getAllServices() || {};
      coreServices.forEach(core => {
        // Try to find a matching service in Firebase (case-insensitive)
        const found = Object.values(services).find(s => s.name && s.name.toLowerCase() === core.name.toLowerCase());
        const available = found ? found.available : 0;
        const status = found ? (found.available > 0 ? 'Available' : 'Booked') : 'Unavailable';
        const statusClass = found ? (found.available > 0 ? 'status-available' : 'status-booked') : 'status-booked';
        const desc = found ? (found.description || core.description) : core.description;
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td style="display: flex; align-items: center;">
            <img src="${core.image}" alt="${core.name}" class="product-img" />
            <div>
              <div class="product-title">${core.name}</div>
              <div class="product-desc">${desc}</div>
            </div>
          </td>
          <td>
            <div class="status-label">This service is currently:</div>
            <div class="status-badge ${statusClass}">${status}</div>
          </td>
          <td class="inventory-info">${found ? found.available + ' units' : '0 units'}</td>
        `;
        servicesTbody.appendChild(tr);
      });

      // Load bundles
      const bundlesTbody = document.getElementById('bundlesTbody');
      bundlesTbody.innerHTML = '';
      const bundles = await window.getAllBundles ? (await window.getAllBundles()) : {};
      if (bundles && Object.keys(bundles).length > 0) {
        Object.values(bundles).forEach(bundle => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td style="padding:12px 10px;font-weight:bold;">${bundle.name || ''}</td>
            <td style="padding:12px 10px;">₱${bundle.price || ''}</td>
            <td style="padding:12px 10px;">${(bundle.services||[]).join(', ')}</td>
          `;
          bundlesTbody.appendChild(tr);
        });
      } else {
        bundlesTbody.innerHTML = '<tr><td colspan="3" style="padding:12px 10px;">No bundles found.</td></tr>';
      }
    });
  </script>
    <!-- Floating Chat Feature (Copied from homepage.html) -->
    <div class="floating-chat-head" id="floatingChatHead" title="Chat with us">
      <i class="fas fa-comment"></i>
    </div>
    <div class="floating-chat-popup" id="floatingChatPopup">
      <div class="floating-chat-popup-header">
        <span style="font-weight:700; font-size:1.1rem; letter-spacing:1px;">AudioWerks</span>
        <div class="floating-chat-header-right">
          <button class="floating-chat-call-btn" title="Call"><i class="fas fa-phone"></i></button>
        </div>
      </div>
      <div class="floating-chat-popup-body" id="floatingChatPopupBody">
        <div class="floating-chat-bubble left">
          Hi there! <span class="bubble-reaction">❤️</span><span class="bubble-menu"><i class="fas fa-ellipsis"></i></span>
        </div>
        <div class="floating-chat-bubble right">
          Hello! How can I help you?<span class="bubble-menu"><i class="fas fa-ellipsis"></i></span>
        </div>
        <div class="floating-chat-bubble left">
          I want to know more about your services.<span class="bubble-menu"><i class="fas fa-ellipsis"></i></span>
        </div>
        <div class="floating-chat-bubble right">
          Sure! We offer lights, sounds, and event equipment rentals.<span class="bubble-menu"><i class="fas fa-ellipsis"></i></span>
        </div>
      </div>
      <div class="floating-chat-popup-input">
        <div class="input-icons">
          <button class="input-btn" title="Attach"><i class="fas fa-paperclip"></i></button>
          <button class="input-btn" title="Pin"><i class="fas fa-thumbtack"></i></button>
          <button class="input-btn" title="Camera"><i class="fas fa-camera"></i></button>
        </div>
        <input type="text" id="floatingChatInput" placeholder="Type your message here..." />
        <button class="send-btn" id="floatingChatSendBtn" title="Send"><i class="fas fa-paper-plane"></i></button>
      </div>
    </div>
    <div id="floatingPinnedModalContainer"></div>
    <input type="file" id="floatingAttachmentInput" style="display:none" multiple />
    <input type="file" id="floatingCameraInput" accept="image/*" capture="environment" style="display:none" multiple />
    <div id="floatingImageModalOverlay"><div id="floatingImageModal"><button class="close-btn" title="Close">&times;</button><img src="" alt="Preview" /></div></div>
    <script>
    // Floating chat head logic (Firebase-integrated)
    const chatHead = document.getElementById('floatingChatHead');
    const chatPopup = document.getElementById('floatingChatPopup');
    const chatInput = document.getElementById('floatingChatInput');
    const chatSendBtn = document.getElementById('floatingChatSendBtn');
    const chatBody = document.getElementById('floatingChatPopupBody');
    const db = firebase.database();
    let currentUser = null;
    if (firebase.auth().currentUser) {
      currentUser = firebase.auth().currentUser;
    } else {
      firebase.auth().onAuthStateChanged(user => { currentUser = user; });
    }

    chatHead.addEventListener('click', () => {
      if (chatPopup.classList.contains('open')) {
        chatPopup.classList.remove('open');
      } else {
        chatPopup.classList.add('open');
        chatInput.focus();
        chatBody.scrollTop = chatBody.scrollHeight;
      }
    });
    document.querySelector('.floating-chat-call-btn').addEventListener('click', () => {
      alert('Call feature coming soon!');
    });
    chatSendBtn.addEventListener('click', sendFloatingChatMsg);
    chatInput.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') sendFloatingChatMsg();
    });

    // Listen for new chat messages in realtime
    db.ref('chat-messages').limitToLast(50).on('value', snap => {
      chatBody.innerHTML = '';
      const val = snap.val();
      if (!val) return;
      const msgs = Object.entries(val).sort((a,b) => a[1].timestamp - b[1].timestamp);
      msgs.forEach(([id, msg]) => {
        const side = (currentUser && msg.uid === currentUser.uid) ? 'right' : 'left';
        const bubble = createFloatingBubble(msg.text, side, { timestamp: formatTime(new Date(msg.timestamp)), name: msg.name });
        chatBody.appendChild(bubble);
      });
      chatBody.scrollTop = chatBody.scrollHeight;
    });

    function sendFloatingChatMsg() {
      const msg = chatInput.value.trim();
      if (!msg) return;
      if (!currentUser) {
        alert('You must be logged in to send messages.');
        return;
      }
      db.ref('chat-messages').push({
        text: msg,
        uid: currentUser.uid,
        name: currentUser.displayName || currentUser.email || 'Anonymous',
        timestamp: Date.now()
      });
      chatInput.value = '';
    }

    function formatTime(date) {
      return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    }
    function createFloatingBubble(text, side = 'right', options = {}) {
      const div = document.createElement('div');
      div.className = 'floating-chat-bubble ' + side + (options.pinned ? ' pinned' : '');
      div.textContent = text;
      // Timestamp
      const ts = document.createElement('span');
      ts.className = 'msg-timestamp';
      ts.textContent = options.timestamp || formatTime(new Date());
      div.appendChild(ts);
      // Read receipt (for right/sent messages only)
      let receipt;
      if (side === 'right') {
        receipt = document.createElement('span');
        receipt.className = 'read-receipt';
        receipt.textContent = '✓';
        div.appendChild(receipt);
        // Simulate read after 1.2s
        setTimeout(() => {
          receipt.innerHTML = '<i class="fas fa-eye"></i>';
        }, 1200);
      }
      // Actions container
      const actions = document.createElement('span');
      actions.className = 'msg-actions';
      // Edit (only for right/sender messages)
      if (side === 'right') {
        const editBtn = document.createElement('button');
        editBtn.className = 'msg-action-btn';
        editBtn.title = 'Edit';
        editBtn.innerHTML = '<i class="fas fa-pen"></i>';
        editBtn.onclick = function(e) {
          e.stopPropagation();
          const oldText = div.childNodes[0].nodeValue;
          const input = document.createElement('input');
          input.type = 'text';
          input.value = oldText;
          input.className = 'bubble-edit-input';
          div.replaceChild(input, div.childNodes[0]);
          input.focus();
          input.setSelectionRange(input.value.length, input.value.length);
          input.onkeydown = function(ev) {
            if (ev.key === 'Enter') {
              div.replaceChild(document.createTextNode(input.value), input);
            } else if (ev.key === 'Escape') {
              div.replaceChild(document.createTextNode(oldText), input);
            }
          };
          input.onblur = function() {
            div.replaceChild(document.createTextNode(input.value), input);
          };
        };
        actions.appendChild(editBtn);
      }
      // Delete
      const delBtn = document.createElement('button');
      delBtn.className = 'msg-action-btn';
      delBtn.title = 'Delete';
      delBtn.innerHTML = '<i class="fas fa-trash"></i>';
      delBtn.onclick = function(e) {
        e.stopPropagation();
        div.remove();
      };
      actions.appendChild(delBtn);
      // React (heart)
      const reactBtn = document.createElement('button');
      reactBtn.className = 'msg-action-btn';
      reactBtn.title = 'React';
      reactBtn.innerHTML = '<i class="fas fa-heart"></i>';
      reactBtn.onclick = function(e) {
        e.stopPropagation();
        let reaction = div.querySelector('.bubble-reaction');
        if (reaction) {
          reaction.remove();
        } else {
          reaction = document.createElement('span');
          reaction.className = 'bubble-reaction';
          reaction.textContent = '❤️';
          div.appendChild(reaction);
        }
      };
      actions.appendChild(reactBtn);
      // Pin
      const pinBtn = document.createElement('button');
      pinBtn.className = 'msg-action-btn';
      pinBtn.title = 'Pin';
      pinBtn.innerHTML = '<i class="fas fa-thumbtack"></i>';
      pinBtn.onclick = function(e) {
        e.stopPropagation();
        div.classList.toggle('pinned');
      };
      actions.appendChild(pinBtn);
      div.appendChild(actions);
      return div;
    }
    function sendFloatingChatMsg() {
      const msg = chatInput.value.trim();
      if (!msg) return;
      const msgDiv = createFloatingBubble(msg, 'right', { timestamp: formatTime(new Date()) });
      chatBody.appendChild(msgDiv);
      chatInput.value = '';
      chatBody.scrollTop = chatBody.scrollHeight;
      // Demo auto-reply
      setTimeout(() => {
        const reply = createFloatingBubble('Thank you for your message!', 'left', { timestamp: formatTime(new Date()) });
        chatBody.appendChild(reply);
        chatBody.scrollTop = chatBody.scrollHeight;
      }, 900);
    }
    // On page load, update initial bubbles to use new structure
    window.addEventListener('DOMContentLoaded', () => {
      const chatBody = document.getElementById('floatingChatPopupBody');
      const initialMsgs = [
        { text: 'Hi there!', side: 'left', reaction: true },
        { text: 'Hello! How can I help you?', side: 'right' },
        { text: 'I want to know more about your services.', side: 'left' },
        { text: 'Sure! We offer lights, sounds, and event equipment rentals.', side: 'right' }
      ];
      chatBody.innerHTML = '';
      initialMsgs.forEach((msg, idx) => {
        const bubble = createFloatingBubble(msg.text, msg.side, { timestamp: formatTime(new Date(Date.now() - (initialMsgs.length-idx)*60000)), pinned: false });
        if (msg.reaction) {
          const reaction = document.createElement('span');
          reaction.className = 'bubble-reaction';
          reaction.textContent = '❤️';
          bubble.appendChild(reaction);
        }
        chatBody.appendChild(bubble);
      });
    });
    const attachBtn = document.querySelector('.input-btn[title="Attach"]');
    const pinListBtn = document.querySelector('.input-btn[title="Pin"]');
    const cameraBtn = document.querySelector('.input-btn[title="Camera"]');
    const floatingAttachmentInput = document.getElementById('floatingAttachmentInput');
    const floatingCameraInput = document.getElementById('floatingCameraInput');
    const floatingPinnedModalContainer = document.getElementById('floatingPinnedModalContainer');
    attachBtn.addEventListener('click', function() {
      floatingAttachmentInput.value = '';
      floatingAttachmentInput.click();
    });
    cameraBtn.addEventListener('click', function() {
      floatingCameraInput.value = '';
      floatingCameraInput.click();
    });
    floatingAttachmentInput.addEventListener('change', function(e) {
      if (!e.target.files || e.target.files.length === 0) return;
      Array.from(e.target.files).forEach(file => {
        if (file.type.startsWith('image/')) {
          const reader = new FileReader();
          reader.onload = function(ev) {
            const div = createFloatingBubble('', 'right', { timestamp: formatTime(new Date()) });
            const img = document.createElement('img');
            img.src = ev.target.result;
            img.style.maxWidth = '180px';
            img.style.maxHeight = '120px';
            img.style.display = 'block';
            img.style.margin = '8px 0';
            img.style.borderRadius = '10px';
            img.style.boxShadow = '0 2px 8px rgba(0,0,0,0.08)';
            img.style.cursor = 'pointer';
            img.onclick = () => showFloatingImageModal(img.src);
            div.insertBefore(img, div.querySelector('.msg-timestamp'));
            chatBody.appendChild(div);
            chatBody.scrollTop = chatBody.scrollHeight;
          };
          reader.readAsDataURL(file);
        } else {
          const div = createFloatingBubble('', 'right', { timestamp: formatTime(new Date()) });
          const fileDiv = document.createElement('div');
          fileDiv.style.display = 'flex';
          fileDiv.style.alignItems = 'center';
          fileDiv.style.gap = '8px';
          fileDiv.style.margin = '8px 0';
          fileDiv.style.fontSize = '1.05rem';
          fileDiv.style.color = '#002244';
          fileDiv.style.background = '#f5f8fa';
          fileDiv.style.borderRadius = '8px';
          fileDiv.style.padding = '6px 12px';
          const url = URL.createObjectURL(file);
          fileDiv.innerHTML = `<i class='fas fa-file'></i> <a href="${url}" download="${file.name}" target="_blank">${file.name}</a>`;
          div.insertBefore(fileDiv, div.querySelector('.msg-timestamp'));
          chatBody.appendChild(div);
          chatBody.scrollTop = chatBody.scrollHeight;
        }
      });
    });
    floatingCameraInput.addEventListener('change', function(e) {
      if (!e.target.files || e.target.files.length === 0) return;
      Array.from(e.target.files).forEach(file => {
        if (file.type.startsWith('image/')) {
          const reader = new FileReader();
          reader.onload = function(ev) {
            const div = createFloatingBubble('', 'right', { timestamp: formatTime(new Date()) });
            const img = document.createElement('img');
            img.src = ev.target.result;
            img.style.maxWidth = '180px';
            img.style.maxHeight = '120px';
            img.style.display = 'block';
            img.style.margin = '8px 0';
            img.style.borderRadius = '10px';
            img.style.boxShadow = '0 2px 8px rgba(0,0,0,0.08)';
            img.style.cursor = 'pointer';
            img.onclick = () => showFloatingImageModal(img.src);
            div.insertBefore(img, div.querySelector('.msg-timestamp'));
            chatBody.appendChild(div);
            chatBody.scrollTop = chatBody.scrollHeight;
          };
          reader.readAsDataURL(file);
        }
      });
    });
    function showFloatingImageModal(src) {
      const overlay = document.getElementById('floatingImageModalOverlay');
      const modal = document.getElementById('floatingImageModal');
      const img = modal.querySelector('img');
      img.src = src;
      overlay.classList.add('open');
    }
    document.querySelector('#floatingImageModal .close-btn').onclick = function() {
      document.getElementById('floatingImageModalOverlay').classList.remove('open');
    };
    // Pinned modal logic (optional, can be extended)
    pinListBtn.addEventListener('click', function() {
      // Demo: Show all pinned bubbles in a modal
      const pinned = Array.from(chatBody.querySelectorAll('.floating-chat-bubble.pinned'));
      let html = `<div class='pinned-modal'><button class='close-btn' title='Close'>&times;</button><h2>Pinned Messages</h2><div class='pinned-list'>`;
      if (pinned.length === 0) {
        html += '<div style="color:#888">No pinned messages yet.</div>';
      } else {
        pinned.forEach(bubble => {
          html += `<div class='floating-chat-bubble left'>${bubble.childNodes[0].nodeValue}<span class='msg-timestamp'>${bubble.querySelector('.msg-timestamp').textContent}</span></div>`;
        });
      }
      html += '</div></div>';
      floatingPinnedModalContainer.innerHTML = `<div class='pinned-modal-overlay'>${html}</div>`;
      const modal = floatingPinnedModalContainer.querySelector('.pinned-modal');
      modal.querySelector('.close-btn').onclick = function() {
        floatingPinnedModalContainer.innerHTML = '';
      };
      floatingPinnedModalContainer.querySelector('.pinned-modal-overlay').onclick = function(e) {
        if (e.target === this) floatingPinnedModalContainer.innerHTML = '';
      };
    });
    </script>
</body>
</html> 